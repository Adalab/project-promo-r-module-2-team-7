"use strict";const resetBtn=document.querySelector(".js-reset-btn"),formElement=document.querySelector(".js-form"),nameInput=document.querySelector(".js-input-name"),jobInput=document.querySelector(".js-input-job"),emailInput=document.querySelector(".js-input-email"),phoneInput=document.querySelector(".js-input-phone"),linkedinInput=document.querySelector(".js-input-linkedin"),githubInput=document.querySelector(".js-input-github"),boxInput=document.querySelector(".js-input-box"),previewArticleTitle=document.querySelector(".js-article-title"),previewArticleSubtitle=document.querySelector(".js-article-subtitle"),previewArticlePhoto=document.querySelector(".js-article-photo"),previewArticlePhone=document.querySelector(".js-article-link-phone"),previewArticleMail=document.querySelector(".js-article-link-mail"),previewArticleLinkedin=document.querySelector(".js-article-link-linkedin"),previewArticleGitHub=document.querySelector(".js-article-link-github"),previewArticleElement=document.querySelector(".js-article"),paletteOne=document.querySelector(".js-palette-one"),paletteTwo=document.querySelector(".js-palette-two"),paletteThree=document.querySelector(".js-palette-three"),createButton=document.querySelector(".js-create-button"),shareResultBox=document.querySelector(".js-share-result-box"),shareUrl=document.querySelector(".js-share-url"),linkTwitter=document.querySelector(".js-link-twitter"),data={palette:"1",name:"",job:"",phone:"",email:"",linkedin:"",github:"",photo:""};function checkTarget(e,t){"name"===e?data.name=t:"job"===e?data.job=t:"phone"===e?data.phone=t:"email"===e?data.email=t:"linkedin"===e?data.linkedin=t:"github"===e&&(data.github=t)}function updatePreview(){""===data.name?previewArticleTitle.innerHTML="Nombre Apellido":previewArticleTitle.innerHTML=data.name,""===data.job?previewArticleSubtitle.innerHTML="Front-end developer":previewArticleSubtitle.innerHTML=data.job,""===data.phone?previewArticlePhone.href="tel:#":previewArticlePhone.href="tel:"+data.phone,""===data.email?previewArticleMail.href="mailto:#":previewArticleMail.href="mailto:"+data.email,""===data.linkedin?previewArticleLinkedin.href="#":previewArticleLinkedin.href=data.linkedin,""===data.github?previewArticleGitHub.href="#":previewArticleGitHub.href=data.github}function handleInput(e){checkTarget(e.target.name,e.target.value),updatePreview()}function checkPalette(e){previewArticleElement.classList.remove("palette-1"),previewArticleElement.classList.remove("palette-2"),previewArticleElement.classList.remove("palette-3"),previewArticleElement.classList.add("palette-"+e.currentTarget.value),data.palette=e.currentTarget.value,console.log(data.palette)}formElement.addEventListener("input",handleInput),resetBtn.addEventListener("click",e=>{e.preventDefault(),nameInput.value="",jobInput.value="",emailInput.value="",phoneInput.value="",linkedinInput.value="",githubInput.value="",boxInput.style="",previewArticleTitle.innerHTML="Nombre Apellido",previewArticleSubtitle.innerHTML="Front-end developer",previewArticlePhoto.style="./images/profile-picture.jpg",previewArticlePhone.href="tel:#",previewArticleMail.href="mailto:#",previewArticleLinkedin.href="#",previewArticleGitHub.href="#",paletteOne.checked=!0,paletteTwo.checked=!1,paletteThree.checked=!1,previewArticleElement.classList.remove("palette-2"),previewArticleElement.classList.remove("palette-3"),previewArticleElement.classList.add("palette-1")}),paletteOne.addEventListener("click",checkPalette),paletteTwo.addEventListener("click",checkPalette),paletteThree.addEventListener("click",checkPalette);const designHead=document.querySelector(".js-design-head"),designBigBox=document.querySelector(".js-design-big-box"),fillHead=document.querySelector(".js-fill-head"),fillBigBox=document.querySelector(".js-fill-big-box"),shareHead=document.querySelector(".js-share-head"),shareBigBox=document.querySelector(".js-share-big-box"),designArrowUp=document.querySelector(".js-design-arrow-up"),designArrowDown=document.querySelector(".js-design-arrow-down"),fillArrowUp=document.querySelector(".js-fill-arrow-up"),fillArrowDown=document.querySelector(".js-fill-arrow-down"),shareArrowUp=document.querySelector(".js-share-arrow-up"),shareArrowDown=document.querySelector(".js-share-arrow-down"),allHead=[designHead,fillHead,shareHead];function reviewClickPlace(e){switch(e){case fillHead:fillBigBox.classList.remove("collapsed"),fillArrowUp.classList.add("collapsed"),fillArrowDown.classList.remove("collapsed");break;case shareHead:shareBigBox.classList.remove("collapsed"),shareArrowUp.classList.add("collapsed"),shareArrowDown.classList.remove("collapsed");break;case designHead:designBigBox.classList.remove("collapsed"),designArrowUp.classList.add("collapsed"),designArrowDown.classList.remove("collapsed")}}function addClass(){designBigBox.classList.add("collapsed"),fillBigBox.classList.add("collapsed"),shareBigBox.classList.add("collapsed"),designArrowUp.classList.remove("collapsed"),designArrowDown.classList.add("collapsed"),fillArrowUp.classList.remove("collapsed"),fillArrowDown.classList.add("collapsed"),shareArrowUp.classList.remove("collapsed"),shareArrowDown.classList.add("collapsed")}function handleClick(e){e.preventDefault(),addClass(),reviewClickPlace(e.currentTarget)}for(let e of allHead)e.addEventListener("click",handleClick);const fr=new FileReader,fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`,data.photo=fr.result}function changeBtnStyle(){createButton.classList.add("createbutton-of"),createButton.classList.remove("createbutton-on")}function handleCreateClick(e){e.preventDefault(),fetch("https://awesome-profile-cards.herokuapp.com/card",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(data)}).then(e=>e.json()).then(e=>{if(console.log(e),e.success){changeBtnStyle(),shareResultBox.classList.remove("collapsed");const t=e.cardURL;linkTwitter.href="https://twitter.com/intent/tweet?text=Hola,%20os%20comparto%20mi%20tarjeta:%0a&url="+t,shareUrl.href=t,shareUrl.innerHTML=t}else alert("Por favor, verifica que has rellenado todos los campos obligatorios."),shareBigBox.classList.add("collapsed"),shareArrowUp.classList.remove("collapsed"),shareArrowDown.classList.add("collapsed"),fillBigBox.classList.remove("collapsed"),fillArrowUp.classList.add("collapsed"),fillArrowDown.classList.remove("collapsed")})}fileField.addEventListener("change",getImage),createButton.addEventListener("click",handleCreateClick),emailInput.addEventListener("input",e=>{e.preventDefault();const t=e.currentTarget.value;!0!==/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(t)?emailInput.style.border="thin solid red":emailInput.style.border="thin solid #a2deaf"}),phoneInput.addEventListener("input",e=>{e.preventDefault();const t=e.currentTarget.value;!0!==/^([+]?[\s0-9]+)?(\d{3}|[(]?[0-9]+[)])?([-]?[\s]?[0-9])+$/.test(t)?phoneInput.style.border="thin solid red":phoneInput.style.border="thin solid #a2deaf"}),linkedinInput.addEventListener("input",e=>{e.preventDefault();const t=e.currentTarget.value;!0!==/^[a-zA-Z0-9._-]{5,30}$/.test(t)?linkedinInput.style.border="thin solid red":linkedinInput.style.border="thin solid #a2deaf"}),githubInput.addEventListener("input",e=>{e.preventDefault();const t=e.currentTarget.value;!0!==/^[a-zA-Z0-9._-]{5,30}$/.test(t)?githubInput.style.border="thin solid red":githubInput.style.border="thin solid #a2deaf"});